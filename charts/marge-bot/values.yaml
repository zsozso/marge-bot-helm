# Default values for marge.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# marge-bot arguments
args: []
# args: [
#   "--impersonate-approvers",
#   "--add-tested",
#   "--add-reviewers",
#   "--add-part-of"
# ]

# secrets will be set as env vars in the container
secret:
  # If defined, use this existing secret and do not create a new one
  existingSecret: ""
  
  # Configuration for creating an ExternalSecret (requires external-secrets operator)
  externalSecret:
    enabled: false
    # refreshInterval: "1h"
    # secretStoreRef:
    #   name: vault-backend
    #   kind: ClusterSecretStore
    # target:
    #   creationPolicy: Owner
    # data: 
    #  - secretKey: gitlab-url
    #    remoteRef:
    #      key: marge-bot
    #      property: gitlab-url
    #  - secretKey: ssh-key
    #    remoteRef:
    #      key: marge-bot
    #      property: ssh-key
    #  - secretKey: auth-token
    #    remoteRef:
    #      key: marge-bot
    #      property: auth-token

  # Custom keys for the secret data mapping
  keys:
    gitlabUrl: "gitlab-url"
    sshKey: "ssh-key"
    authToken: "auth-token"

  gitlabUrl: "https://gitlab.com"
  # ssh private key must already be in base64 format, use this command on
  # yours: base64 -w0 <my_private_key>
  sshKey: ""
  authToken: ""

# Additional environment variables for the container
# Use this to set environment variables from secrets or configmaps
extraEnv: []
  # - name: MARGE_SSH_KEY
  #   valueFrom:
  #     secretKeyRef:
  #       name: marge-bot-secret
  #       key: ssh-key

# Custom CA certificate content
customCaCert: ""
existingCustomCaCert: ""

# Paths for SSH key and auth token files when using extraVolumes
margeSshKeyFile: ""
margeAuthTokenFile: ""

# marge-bot config file content
config: ""
# config: |-
#   branch-regexp: .*
#   batch: false
#   impersonate-approvers: true
#   project-regexp: .*
#   # allowing any of the following makes MRs with "squash commits" unmergeable by marge-bot
#   add-part-of: false
#   add-reviewers: false
#   add-tested: false


replicaCount: 1

image:
  repository: hiboxsystems/marge-bot
  pullPolicy: IfNotPresent
  # Use Chart.appVersion if empty
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000



resources: {}

priorityClassName: ""

livenessProbe:
  enabled: false
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3
  exec:
    command:
      - pidof
      - python

readinessProbe:
  enabled: false
  initialDelaySeconds: 10
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3
  exec:
    command:
      - pidof
      - python

nodeSelector: {}

tolerations: []

affinity: {}

extraVolumes: []
  # - name: marge-bot-secret
  #   csi:
  #     driver: secrets-store.csi.k8s.io
  #     readOnly: true
  #     volumeAttributes:
  #       secretProviderClass: marge-bot-secret

extraVolumeMounts: []
  # - mountPath: /mnt/marge-bot-secret
  #   name: marge-bot-secret
  #   readOnly: true

